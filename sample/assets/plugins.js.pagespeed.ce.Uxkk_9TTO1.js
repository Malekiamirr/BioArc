/*!
 * FilePondPluginFileEncode 2.1.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FilePondPluginFileEncode=n()}(this,function(){"use strict";var e=function(){self.onmessage=function(n){e(n.data.message,function(e){self.postMessage({id:n.data.id,message:e})})};var e=function(e,n){var t=e.file,i=new FileReader;i.onloadend=function(){n(i.result.replace("data:","").replace(/^.+,/,""))},i.readAsDataURL(t)}},n=function(n){var t=n.addFilter,i=n.utils,a=i.Type,o=i.createWorker,d=i.createRoute,r=i.isFile,f=function(n){var t=n.name,i=n.file;return new Promise(function(n){var a=o(e);a.post({file:i},function(e){n({name:t,data:e}),a.terminate()})})},u=[];return t("DID_CREATE_ITEM",function(e,n){(0,n.query)("GET_ALLOW_FILE_ENCODE")&&(e.extend("getFileEncodeBase64String",function(){return u[e.id]&&u[e.id].data}),e.extend("getFileEncodeDataURL",function(){return"data:".concat(e.fileType,";base64,").concat(u[e.id].data)}))}),t("SHOULD_PREPARE_OUTPUT",function(e,n){var t=n.query;return new Promise(function(e){e(t("GET_ALLOW_FILE_ENCODE"))})}),t("COMPLETE_PREPARE_OUTPUT",function(e,n){var t=n.item,i=n.query;return new Promise(function(n){if(!i("GET_ALLOW_FILE_ENCODE")||!r(e)&&!Array.isArray(e))return n(e);u[t.id]={metadata:t.getMetadata(),data:null},Promise.all((e instanceof Blob?[{name:null,file:e}]:e).map(f)).then(function(i){u[t.id].data=e instanceof Blob?i[0].data:i,n(e)})})}),t("CREATE_VIEW",function(e){var n=e.is,t=e.view,i=e.query;n("file-wrapper")&&i("GET_ALLOW_FILE_ENCODE")&&t.registerWriter(d({DID_PREPARE_OUTPUT:function(e){var n=e.root,t=e.action;if(!i("IS_ASYNC")){var a=i("GET_ITEM",t.id);if(a){var o=u[a.id],d=o.metadata,r=o.data,f=JSON.stringify({id:a.id,name:a.file.name,type:a.file.type,size:a.file.size,metadata:d,data:r});n.ref.data?n.ref.data.value=f:n.dispatch("DID_DEFINE_VALUE",{id:a.id,value:f})}}},DID_REMOVE_ITEM:function(e){var n=e.action,t=i("GET_ITEM",n.id);t&&delete u[t.id]}}))}),{options:{allowFileEncode:[!0,a.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n});


/*!
 * FilePondPluginFileMetadata 1.0.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginFileMetadata=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils.Type;return t("SET_ATTRIBUTE_TO_OPTION_MAP",function(e){return Object.assign(e,{"^fileMetadata":{group:"fileMetadataObject"}})}),t("DID_LOAD_ITEM",function(e,t){var n=t.query;return new Promise(function(t){if(!n("GET_ALLOW_FILE_METADATA"))return t(e);var i=n("GET_FILE_METADATA_OBJECT");"object"==typeof i&&null!==i&&Object.keys(i).forEach(function(t){e.setMetadata(t,i[t],!0)}),t(e)})}),{options:{allowFileMetadata:[!0,n.BOOLEAN],fileMetadataObject:[null,n.OBJECT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});


/*!
 * FilePondPluginFilePoster 2.4.0
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginFilePoster=t()}(this,function(){"use strict";var e={type:"spring",stiffness:.5,damping:.45,mass:10},t=function(e){return-.5*(Math.cos(Math.PI*e)-1)},i=function(e){var t=Math.min(10/e.width,10/e.height),i=document.createElement("canvas"),a=i.getContext("2d"),o=i.width=Math.ceil(e.width*t),n=i.height=Math.ceil(e.height*t);a.drawImage(e,0,0,o,n);var c=null;try{c=a.getImageData(0,0,o,n).data}catch(e){return null}for(var l=c.length,d=0,s=0,f=0,E=0;E<l;E+=4)d+=c[E]*c[E],s+=c[E+1]*c[E+1],f+=c[E+2]*c[E+2];return{r:d=r(d,l),g:s=r(s,l),b:f=r(f,l)}},r=function(e,t){return Math.floor(Math.sqrt(e/(t/4)))},a=function(e,i,r,a,o){e.width=i,e.height=r;var n=e.getContext("2d"),c=.5*i,l=n.createRadialGradient(c,r+110,r-100,c,r+110,r+100);!function(e,i){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=1-n,l=i.join(","),d=0;d<=o;d++){var s=d/o,f=n+c*s;e.addColorStop(f,"rgba(".concat(l,", ").concat(a(s)*r,")"))}}(l,a,o,void 0,8,.4),n.save(),n.translate(.5*-i,0),n.scale(2,1),n.fillStyle=l,n.fillRect(0,0,i,r),n.restore()},o="undefined"!=typeof navigator,n=o&&document.createElement("canvas"),c=o&&document.createElement("canvas"),l=o&&document.createElement("canvas");o&&(a(n,500,200,[40,40,40],.85),a(c,500,200,[196,78,71],1),a(l,500,200,[54,151,99],1));var d=function(t){var r=t.utils.createView({name:"file-poster-overlay",tag:"canvas",ignoreRect:!0,create:function(e){var t,i,r=e.root,a=e.props;t=a.template,(i=r.element).width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),a=function(e){var t=e.root;t.ref.overlayShadow.opacity=1,t.ref.overlayError.opacity=0,t.ref.overlaySuccess.opacity=0},o=function(e){var t=e.root;t.ref.overlayShadow.opacity=.25,t.ref.overlayError.opacity=1};return t.utils.createView({name:"file-poster-wrapper",create:function(i){var a=i.root,o=i.props,d=function(t){return t.utils.createView({name:"file-poster",tag:"div",ignoreRect:!0,create:function(e){var t=e.root;t.ref.image=document.createElement("img"),t.element.appendChild(t.ref.image)},write:t.utils.createRoute({DID_FILE_POSTER_LOAD:function(e){var t=e.root,i=e.props,r=i.id,a=t.query("GET_ITEM",{id:i.id});if(a){var o=a.getMetadata("poster");t.ref.image.src=o,t.dispatch("DID_FILE_POSTER_DRAW",{id:r})}}}),mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:e,scaleY:e,opacity:{type:"tween",duration:750}}}})}(t);a.ref.image=a.appendChildView(a.createChildView(d,{id:o.id,scaleX:1.25,scaleY:1.25,opacity:0})),a.ref.overlayShadow=a.appendChildView(a.createChildView(r,{template:n,opacity:0})),a.ref.overlaySuccess=a.appendChildView(a.createChildView(r,{template:l,opacity:0})),a.ref.overlayError=a.appendChildView(a.createChildView(r,{template:c,opacity:0}))},write:t.utils.createRoute({DID_FILE_POSTER_LOAD:function(e){e.root.ref.overlayShadow.opacity=1},DID_FILE_POSTER_DRAW:function(e){var t=e.root.ref.image;t.scaleX=1,t.scaleY=1,t.opacity=1},DID_FILE_POSTER_CONTAINER_CREATE:function(e){var t=e.root,r=e.props.id,a=t.query("GET_ITEM",r);if(a){var o,n,c,l=a.getMetadata("poster"),d=function(e){var o=t.query("GET_FILE_POSTER_CALCULATE_AVERAGE_IMAGE_COLOR")?i(e):null;a.setMetadata("color",o,!0),t.dispatch("DID_FILE_POSTER_LOAD",{id:r,data:e})};o=l,n=function(e,i){var a,o;t.dispatch("DID_FILE_POSTER_CALCULATE_SIZE",{id:r,width:e,height:i}),(a=l,o=t.query("GET_FILE_POSTER_CROSS_ORIGIN_ATTRIBUTE_VALUE"),new Promise(function(e,t){var i=new Image;"string"==typeof crossOrigin&&(i.crossOrigin=o),i.onload=function(){e(i)},i.onerror=function(e){t(e)},i.src=a})).then(d)},(c=new Image).onload=function(){var e=c.naturalWidth,t=c.naturalHeight;c=null,n(e,t)},c.src=o}},DID_THROW_ITEM_LOAD_ERROR:o,DID_THROW_ITEM_PROCESSING_ERROR:o,DID_THROW_ITEM_INVALID:o,DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root;t.ref.overlayShadow.opacity=.25,t.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:a,DID_REVERT_ITEM_PROCESSING:a})})},s=function(e){var t=e.addFilter,i=e.utils,r=i.Type,a=i.createRoute,o=d(e);return t("CREATE_VIEW",function(e){var t=e.is,i=e.view,r=e.query;if(t("file")&&r("GET_ALLOW_FILE_POSTER")){var n=function(e,t){var a=t.id,n=r("GET_ITEM",a);n&&n.getMetadata("poster")&&!n.archived&&r("GET_FILE_POSTER_FILTER_ITEM")(n)&&(e.ref.filePoster&&i.removeChildView(e.ref.filePoster),e.ref.filePoster=i.appendChildView(i.createChildView(o,{id:a})),e.dispatch("DID_FILE_POSTER_CONTAINER_CREATE",{id:a}))},c=function(e){var t=e.root,i=t.query("GET_FILE_POSTER_HEIGHT");if(i)return i;var r=t.query("GET_FILE_POSTER_MIN_HEIGHT"),a=t.query("GET_FILE_POSTER_MAX_HEIGHT");if(r&&t.ref.imageHeight<r)return r;var o=t.rect.element.width*(t.ref.imageHeight/t.ref.imageWidth);return r&&o<r?r:a&&o>a?a:o};i.registerWriter(a({DID_LOAD_ITEM:function(e){var t=e.root,i=e.props;n(t,i)},DID_FILE_POSTER_CALCULATE_SIZE:function(e){var t=e.root,i=e.action;t.ref.filePoster&&(t.ref.imageWidth=i.width,t.ref.imageHeight=i.height,t.ref.shouldUpdatePanelHeight=!0,t.dispatch("KICK"))},DID_UPDATE_ITEM_METADATA:function(e){var t=e.root,i=e.props,r=e.action;/poster/.test(r.change.key)&&n(t,i)}},function(e){var t=e.root,i=e.props;t.ref.filePoster&&(t.rect.element.hidden||t.ref.shouldUpdatePanelHeight&&(t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i.id,height:c({root:t})}),t.ref.shouldUpdatePanelHeight=!1))}))}}),{options:{allowFilePoster:[!0,r.BOOLEAN],filePosterHeight:[null,r.INT],filePosterMinHeight:[null,r.INT],filePosterMaxHeight:[null,r.INT],filePosterFilterItem:[function(){return!0},r.FUNCTION],filePosterCalculateAverageImageColor:[!1,r.BOOLEAN],filePosterCrossOriginAttributeValue:["Anonymous",r.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:s})),s});


/*!
 * FilePondPluginFileRename 1.1.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FilePondPluginFileRename=n()}(this,function(){"use strict";var e=function(e){var n=e.addFilter,i=e.utils,t=i.Type,o=i.renameFile,u=i.isFile,a=i.getExtensionFromFilename,d=i.getFilenameWithoutExtension;return n("LOAD_FILE",function(e,n){var i=n.query;return new Promise(function(n,t){var l=i("GET_ALLOW_FILE_RENAME"),f=i("GET_FILE_RENAME_FUNCTION");if(u(e)&&l&&f){var r=f({name:e.name,basename:d(e.name),extension:".".concat(a(e.name))}),m=function(i){n(o(e,i))};"string"!=typeof r?r.then(m):m(r)}else n(e)})}),{options:{allowFileRename:[!0,t.BOOLEAN],fileRenameFunction:[null,t.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});


/*!
 * FilePondPluginFileValidateSize 2.2.1
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e=e||self).FilePondPluginFileValidateSize=i()}(this,function(){"use strict";var e=function(e){var i=e.addFilter,l=e.utils,E=l.Type,n=l.replaceInString,_=l.toNaturalFileSize;return i("ALLOW_HOPPER_ITEM",function(e,i){var l=i.query;if(!l("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var E=l("GET_MAX_FILE_SIZE");if(null!==E&&e.size>=E)return!1;var n=l("GET_MIN_FILE_SIZE");return!(null!==n&&e.size<=n)}),i("LOAD_FILE",function(e,i){var l=i.query;return new Promise(function(i,E){if(!l("GET_ALLOW_FILE_SIZE_VALIDATION"))return i(e);var t=l("GET_FILE_VALIDATE_SIZE_FILTER");if(t&&!t(e))return i(e);var a=l("GET_MAX_FILE_SIZE");if(null!==a&&e.size>=a)E({status:{main:l("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:n(l("GET_LABEL_MAX_FILE_SIZE"),{filesize:_(a)})}});else{var I=l("GET_MIN_FILE_SIZE");if(null!==I&&e.size<=I)E({status:{main:l("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:n(l("GET_LABEL_MIN_FILE_SIZE"),{filesize:_(I)})}});else{var u=l("GET_MAX_TOTAL_FILE_SIZE");if(null!==u)if(l("GET_ACTIVE_ITEMS").reduce(function(e,i){return e+i.fileSize},0)>u)return void E({status:{main:l("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:n(l("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:_(u)})}});i(e)}}})}),{options:{allowFileSizeValidation:[!0,E.BOOLEAN],maxFileSize:[null,E.INT],minFileSize:[null,E.INT],maxTotalFileSize:[null,E.INT],fileValidateSizeFilter:[null,E.FUNCTION],labelMinFileSizeExceeded:["File is too small",E.STRING],labelMinFileSize:["Minimum file size is {filesize}",E.STRING],labelMaxFileSizeExceeded:["File is too large",E.STRING],labelMaxFileSize:["Maximum file size is {filesize}",E.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",E.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",E.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});


/*!
 * FilePondPluginFileValidateType 1.2.5
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginFileValidateType=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils,i=n.Type,T=n.isString,E=n.replaceInString,l=n.guesstimateMimeType,o=n.getExtensionFromFilename,a=n.getFilenameFromURL,r=function(e,t){return e.some(function(e){return/\*$/.test(e)?(n=e,(/^[^\/]+/.exec(t)||[]).pop()===n.slice(0,-2)):e===t;var n})},u=function(e,t,n){if(0===t.length)return!0;var i=function(e){var t="";if(T(e)){var n=a(e),i=o(n);i&&(t=l(i))}else t=e.type;return t}(e);return n?new Promise(function(T,E){n(e,i).then(function(e){r(t,e)?T():E()}).catch(E)}):r(t,i)};return t("SET_ATTRIBUTE_TO_OPTION_MAP",function(e){return Object.assign(e,{accept:"acceptedFileTypes"})}),t("ALLOW_HOPPER_ITEM",function(e,t){var n=t.query;return!n("GET_ALLOW_FILE_TYPE_VALIDATION")||u(e,n("GET_ACCEPTED_FILE_TYPES"))}),t("LOAD_FILE",function(e,t){var n=t.query;return new Promise(function(t,i){if(n("GET_ALLOW_FILE_TYPE_VALIDATION")){var T=n("GET_ACCEPTED_FILE_TYPES"),l=n("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),o=u(e,T,l),a=function(){var e,t=T.map((e=n("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"),function(t){return null!==e[t]&&(e[t]||t)})).filter(function(e){return!1!==e});i({status:{main:n("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:E(n("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:t.join(", "),allButLastType:t.slice(0,-1).join(", "),lastType:t[t.length-1]})}})};if("boolean"==typeof o)return o?t(e):a();o.then(function(){t(e)}).catch(a)}else t(e)})}),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});


/*!
 * FilePondPluginImageCrop 2.0.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).FilePondPluginImageCrop=e()}(this,function(){"use strict";var t=function(t){return/^image/.test(t.type)},e=function(e){var n=e.addFilter,o=e.utils,r=o.Type,i=o.isFile,a=o.getNumericAspectRatioFromString,u=function(e,n){return!(!t(e.file)||!n("GET_ALLOW_IMAGE_CROP"))},c=function(t){return"object"==typeof t},f=function(t){return"number"==typeof t},p=function(t,e){return t.setMetadata("crop",Object.assign({},t.getMetadata("crop"),e))};return n("DID_CREATE_ITEM",function(t,e){var n=e.query;t.extend("setImageCrop",function(e){if(u(t,n)&&c(center))return t.setMetadata("crop",e),e}),t.extend("setImageCropCenter",function(e){if(u(t,n)&&c(e))return p(t,{center:e})}),t.extend("setImageCropZoom",function(e){if(u(t,n)&&f(e))return p(t,{zoom:Math.max(1,e)})}),t.extend("setImageCropRotation",function(e){if(u(t,n)&&f(e))return p(t,{rotation:e})}),t.extend("setImageCropFlip",function(e){if(u(t,n)&&c(e))return p(t,{flip:e})}),t.extend("setImageCropAspectRatio",function(e){if(u(t,n)&&void 0!==e){var o=t.getMetadata("crop"),r=a(e),i={center:{x:.5,y:.5},flip:o?Object.assign({},o.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:r};return t.setMetadata("crop",i),i}})}),n("DID_LOAD_ITEM",function(e,n){var o=n.query;return new Promise(function(n,r){var u=e.file;if(!i(u)||!t(u)||!o("GET_ALLOW_IMAGE_CROP"))return n(e);if(e.getMetadata("crop"))return n(e);var c=o("GET_IMAGE_CROP_ASPECT_RATIO");e.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:c?a(c):null}),n(e)})}),{options:{allowImageCrop:[!0,r.BOOLEAN],imageCropAspectRatio:[null,r.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});


/*!
 * FilePondPluginImageEdit 1.6.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginImageEdit=t()}(this,function(){"use strict";var e=function(e){return/^image/.test(e.type)},t=function(t){var i=t.addFilter,n=t.utils,o=t.views,r=n.Type,a=n.createRoute,l=n.createItemAPI,d=void 0===l?function(e){return e}:l,E=o.fileActionButton;i("SHOULD_REMOVE_ON_REVERT",function(t,i){var n=i.item,o=i.query;return new Promise(function(t){var i=n.file;t(!(o("GET_ALLOW_IMAGE_EDIT")&&o("GET_IMAGE_EDIT_ALLOW_EDIT")&&e(i)))})}),i("DID_LOAD_ITEM",function(t,i){var n=i.query,o=i.dispatch;return new Promise(function(i,r){if(t.origin>1)i(t);else{var a=t.file;if(n("GET_ALLOW_IMAGE_EDIT")&&n("GET_IMAGE_EDIT_INSTANT_EDIT"))if(e(a)){var l=function(e,t,i){return function(n){c.shift(),n?t(e):i(e),o("KICK"),d()}},d=function(){if(c.length){var e=c[0],t=e.item,i=e.resolve,n=e.reject;o("EDIT_ITEM",{id:t.id,handleEditorResponse:l(t,i,n)})}};u({item:t,resolve:i,reject:r}),1===c.length&&d()}else i(t);else i(t)}})}),i("DID_CREATE_ITEM",function(e,t){t.query;var i=t.dispatch;e.extend("edit",function(){i("EDIT_ITEM",{id:e.id})})});var c=[],u=function(e){return c.push(e),e};return i("CREATE_VIEW",function(t){var i=t.is,n=t.view,o=t.query;if(o("GET_ALLOW_IMAGE_EDIT")){var r=o("GET_ALLOW_IMAGE_PREVIEW");if(i("file-info")&&!r||i("file")&&r){var l=o("GET_IMAGE_EDIT_EDITOR");if(l){l.filepondCallbackBridge||(l.outputData=!0,l.outputFile=!1,l.filepondCallbackBridge={onconfirm:l.onconfirm||function(){},oncancel:l.oncancel||function(){}});n.registerDestroyer(function(e){var t=e.root;t.ref.buttonEditItem&&t.ref.buttonEditItem.off("click",t.ref.handleEdit),t.ref.editButton&&t.ref.editButton.removeEventListener("click",t.ref.handleEdit)});var c={EDIT_ITEM:function(e){var t=e.root,i=e.props,n=e.action,o=i.id,r=n.handleEditorResponse;l.cropAspectRatio=t.query("GET_IMAGE_CROP_ASPECT_RATIO")||l.cropAspectRatio,l.outputCanvasBackgroundColor=t.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||l.outputCanvasBackgroundColor;var a=t.query("GET_ITEM",o);if(a){var E=a.file,c=a.getMetadata("crop"),u=a.getMetadata("resize"),f=a.getMetadata("filter")||null,s=a.getMetadata("filters")||null,I=a.getMetadata("colors")||null,_=a.getMetadata("markup")||null,T={crop:c||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},size:u?{upscale:u.upscale,mode:u.mode,width:u.size.width,height:u.size.height}:null,filter:s?s.id||s.matrix:t.query("GET_ALLOW_IMAGE_FILTER")&&t.query("GET_IMAGE_FILTER_COLOR_MATRIX")&&!I?f:null,color:I,markup:_};l.onconfirm=function(e){var t=e.data,i=t.crop,n=t.size,o=t.filter,E=t.color,c=t.colorMatrix,u=t.markup,f={};if(i&&(f.crop=i),n){var s=(a.getMetadata("resize")||{}).size,I={width:n.width,height:n.height};I.width&&I.height||!s||(I.width=s.width,I.height=s.height),(I.width||I.height)&&(f.resize={upscale:n.upscale,mode:n.mode,size:I})}u&&(f.markup=u),f.colors=E,f.filters=o,f.filter=c,a.setMetadata(f),l.filepondCallbackBridge.onconfirm(t,d(a)),r&&(l.onclose=function(){r(!0),l.onclose=null})},l.oncancel=function(){l.filepondCallbackBridge.oncancel(d(a)),r&&(l.onclose=function(){r(!1),l.onclose=null})},l.open(E,T)}},DID_LOAD_ITEM:function(t){var i=t.root,a=t.props;if(o("GET_IMAGE_EDIT_ALLOW_EDIT")){var l=a.id,d=o("GET_ITEM",l);if(d){var c=d.file;if(e(c))if(i.ref.handleEdit=function(e){e.stopPropagation(),i.dispatch("EDIT_ITEM",{id:l})},r){var u=n.createChildView(E,{label:"edit",icon:o("GET_IMAGE_EDIT_ICON_EDIT"),opacity:0});u.element.classList.add("filepond--action-edit-item"),u.element.dataset.align=o("GET_STYLE_IMAGE_EDIT_BUTTON_EDIT_ITEM_POSITION"),u.on("click",i.ref.handleEdit),i.ref.buttonEditItem=n.appendChildView(u)}else{var f=n.element.querySelector(".filepond--file-info-main"),s=document.createElement("button");s.className="filepond--action-edit-item-alt",s.innerHTML=o("GET_IMAGE_EDIT_ICON_EDIT")+"<span>edit</span>",s.addEventListener("click",i.ref.handleEdit),f.appendChild(s),i.ref.editButton=s}}}}};if(r){c.DID_IMAGE_PREVIEW_SHOW=function(e){var t=e.root;t.ref.buttonEditItem&&(t.ref.buttonEditItem.opacity=1)}}n.registerWriter(a(c))}}}}),{options:{allowImageEdit:[!0,r.BOOLEAN],styleImageEditButtonEditItemPosition:["bottom center",r.STRING],imageEditInstantEdit:[!1,r.BOOLEAN],imageEditAllowEdit:[!0,r.BOOLEAN],imageEditIconEdit:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><path d="M8.5 17h1.586l7-7L15.5 8.414l-7 7V17zm-1.707-2.707l8-8a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-8 8A1 1 0 0 1 10.5 19h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 .293-.707z" fill="currentColor" fill-rule="nonzero"/></svg>',r.STRING],imageEditEditor:[null,r.OBJECT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t})),t});


/*!
 * FilePondPluginImageExifOrientation 1.0.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(A,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(A=A||self).FilePondPluginImageExifOrientation=e()}(this,function(){"use strict";var A=65496,e=65505,n=1165519206,t=18761,i=274,r=65280,o=function(A,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return A.getUint16(e,n)},a=function(A,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return A.getUint32(e,n)},u="undefined"!=typeof window&&void 0!==window.document,d=void 0,f=u?new Image:{};f.onload=function(){return d=f.naturalWidth>f.naturalHeight},f.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";var l=function(u){var f=u.addFilter,l=u.utils,c=l.Type,g=l.isFile;return f("DID_LOAD_ITEM",function(u,f){var l=f.query;return new Promise(function(f,c){var s=u.file;if(!(g(s)&&function(A){return/^image\/jpeg/.test(A.type)}(s)&&l("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&d))return f(u);(function(u){return new Promise(function(d,f){var l=new FileReader;l.onload=function(u){var f=new DataView(u.target.result);if(o(f,0)===A){for(var l=f.byteLength,c=2;c<l;){var g=o(f,c);if(c+=2,g===e){if(a(f,c+=2)!==n)break;var s=o(f,c+=6)===t;c+=a(f,c+4,s);var v=o(f,c,s);c+=2;for(var w=0;w<v;w++)if(o(f,c+12*w,s)===i)return void d(o(f,c+12*w+8,s))}else{if((g&r)!==r)break;c+=o(f,c)}}d(-1)}else d(-1)},l.readAsArrayBuffer(u.slice(0,65536))})})(s).then(function(A){u.setMetadata("exif",{orientation:A}),f(u)})})}),{options:{allowImageExifOrientation:[!0,c.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:l})),l});


/*!
 * FilePondPluginImageFilter 1.0.0
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginImageFilter=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils.Type;return t("DID_LOAD_ITEM",function(e,t){var n=t.query;return new Promise(function(t,i){if(!function(e){return/^image/.test(e.type)}(e.file)||!n("GET_ALLOW_IMAGE_FILTER"))return t(e);var o=n("GET_IMAGE_FILTER_COLOR_MATRIX");if(!o||20!==o.length)return t(e);e.setMetadata("filter",o),t(e)})}),{options:{allowImageFilter:[!0,n.BOOLEAN],imageFilterColorMatrix:[null,n.ARRAY]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});


/*!
 * FilePondPluginImagePreview 4.6.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginImagePreview=t()}(this,function(){"use strict";function e(e){this.wrapped=e}function t(t){var i,r;function a(i,r){try{var o=t[i](r),c=o.value,s=c instanceof e;Promise.resolve(s?c.wrapped:c).then(function(e){s?a("next",e):n(o.done?"return":"normal",e)},function(e){a("throw",e)})}catch(e){n("throw",e)}}function n(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?a(i.key,i.arg):r=null}this._invoke=function(e,t){return new Promise(function(n,o){var c={key:e,arg:t,resolve:n,reject:o,next:null};r?r=r.next=c:(i=r=c,a(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)};function i(e,t){return r(e)||function(e,t){var i=[],r=!0,a=!1,n=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){a=!0,n=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw n}}return i}(e,t)||a()}function r(e){if(Array.isArray(e))return e}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var n=function(e,t){return s(e.x*t,e.y*t)},o=function(e,t){return s(e.x+t.x,e.y+t.y)},c=function(e,t,i){var r=Math.cos(t),a=Math.sin(t),n=s(e.x-i.x,e.y-i.y);return s(i.x+r*n.x-a*n.y,i.y+a*n.x+r*n.y)},s=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},h=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0;return"string"==typeof e?parseFloat(e)*i:"number"==typeof e?e*(r?t[r]:Math.min(t.width,t.height)):void 0},u=function(e){return null!=e},l=function(e,t){return Object.keys(t).forEach(function(i){return e.setAttribute(i,t[i])})},d=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&l(i,t),i},f={contain:"xMidYMid meet",cover:"xMidYMid slice"},g={left:"start",center:"middle",right:"end"},p=function(e){return function(t){return d(e,{id:t.id})}},m={image:function(e){var t=d("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=function(){t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},rect:p("rect"),ellipse:p("ellipse"),text:p("text"),path:p("path"),line:function(e){var t=d("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),i=d("line");t.appendChild(i);var r=d("path");t.appendChild(r);var a=d("path");return t.appendChild(a),t}},y={rect:function(e){return l(e,Object.assign({},e.rect,e.styles))},ellipse:function(e){var t=e.rect.x+.5*e.rect.width,i=e.rect.y+.5*e.rect.height,r=.5*e.rect.width,a=.5*e.rect.height;return l(e,Object.assign({cx:t,cy:i,rx:r,ry:a},e.styles))},image:function(e,t){l(e,Object.assign({},e.rect,e.styles,{preserveAspectRatio:f[t.fit]||"none"}))},text:function(e,t,i,r){var a=h(t.fontSize,i,r),n=t.fontFamily||"sans-serif",o=t.fontWeight||"normal",c=g[t.textAlign]||"start";l(e,Object.assign({},e.rect,e.styles,{"stroke-width":0,"font-weight":o,"font-size":a,"font-family":n,"text-anchor":c})),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},path:function(e,t,i,r){var a;l(e,Object.assign({},e.styles,{fill:"none",d:(a=t.points.map(function(e){return{x:h(e.x,i,r,"width"),y:h(e.y,i,r,"height")}}),a.map(function(e,t){return"".concat(0===t?"M":"L"," ").concat(e.x," ").concat(e.y)}).join(" "))}))},line:function(e,t,i,r){l(e,Object.assign({},e.rect,e.styles,{fill:"none"}));var a=e.childNodes[0],u=e.childNodes[1],d=e.childNodes[2],f=e.rect,g={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(l(a,{x1:f.x,y1:f.y,x2:g.x,y2:g.y}),t.lineDecoration){u.style.display="none",d.style.display="none";var p=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?{x:0,y:0}:s(e.x/t,e.y/t)}({x:g.x-f.x,y:g.y-f.y}),m=h(.05,i,r);if(-1!==t.lineDecoration.indexOf("arrow-begin")){var y=n(p,m),E=o(f,y),v=c(f,2,E),w=c(f,-2,E);l(u,{style:"display:block;",d:"M".concat(v.x,",").concat(v.y," L").concat(f.x,",").concat(f.y," L").concat(w.x,",").concat(w.y)})}if(-1!==t.lineDecoration.indexOf("arrow-end")){var _=n(p,-m),I=o(g,_),M=c(g,2,I),x=c(g,-2,I);l(d,{style:"display:block;",d:"M".concat(M.x,",").concat(M.y," L").concat(g.x,",").concat(g.y," L").concat(x.x,",").concat(x.y)})}}}},E=function(e,t,i,r,a){"path"!==t&&(e.rect=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=h(e.x,t,i,"width")||h(e.left,t,i,"width"),a=h(e.y,t,i,"height")||h(e.top,t,i,"height"),n=h(e.width,t,i,"width"),o=h(e.height,t,i,"height"),c=h(e.right,t,i,"width"),s=h(e.bottom,t,i,"height");return u(a)||(a=u(o)&&u(s)?t.height-o-s:s),u(r)||(r=u(n)&&u(c)?t.width-n-c:c),u(n)||(n=u(r)&&u(c)?t.width-r-c:0),u(o)||(o=u(a)&&u(s)?t.height-a-s:0),{x:r||0,y:a||0,width:n||0,height:o||0}}(i,r,a)),e.styles=function(e,t,i){var r=e.borderStyle||e.lineStyle||"solid",a=e.backgroundColor||e.fontColor||"transparent",n=e.borderColor||e.lineColor||"transparent",o=h(e.borderWidth||e.lineWidth,t,i);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":o||0,"stroke-dasharray":"string"==typeof r?"":r.map(function(e){return h(e,t,i)}).join(","),stroke:n,fill:a,opacity:e.opacity||1}}(i,r,a),y[t](e,i,r,a)},v=["x","y","left","top","right","bottom","width","height"],w=function(e){var t=i(e,2),r=t[0],a=t[1],n=a.points?{}:v.reduce(function(e,t){var i;return e[t]="string"==typeof(i=a[t])&&/%/.test(i)?parseFloat(i)/100:i,e},{});return[r,Object.assign({zIndex:0},a,n)]},_=function(e,t){return e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0},I=function(e){return e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function(e){var t=e.root,r=e.props;if(r.dirty){var a=r.crop,n=r.resize,o=r.markup,c=r.width,s=r.height,h=a.width,u=a.height;if(n){var l=n.size,d=l&&l.width,f=l&&l.height,g=n.mode,p=n.upscale;d&&!f&&(f=d),f&&!d&&(d=f);var y=h<d&&u<f;if(!y||y&&p){var v,I=d/h,M=f/u;if("force"===g)h=d,u=f;else"cover"===g?v=Math.max(I,M):"contain"===g&&(v=Math.min(I,M)),h*=v,u*=v}}var x={width:c,height:s};t.element.setAttribute("width",x.width),t.element.setAttribute("height",x.height);var T=Math.min(c/h,s/u);t.element.innerHTML="";var A=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(A).map(w).sort(_).forEach(function(e){var r=i(e,2),a=r[0],n=r[1],o=function(e,t){return m[e](t)}(a,n);E(o,a,n,x,T),t.element.appendChild(o)})}}})},M=function(e,t){return{x:e,y:t}},x=function(e,t){return M(e.x-t.x,e.y-t.y)},T=function(e,t){return Math.sqrt(function(e,t){return function(e,t){return e.x*t.x+e.y*t.y}(x(e,t),x(e,t))}(e,t))},A=function(e,t){var i=e,r=t,a=1.5707963267948966-t,n=Math.sin(1.5707963267948966),o=Math.sin(r),c=Math.sin(a),s=Math.cos(a),h=i/n;return M(s*(h*o),s*(h*c))},R=function(e,t,i,r){var a=r.x>.5?1-r.x:r.x,n=r.y>.5?1-r.y:r.y,o=2*a*e.width,c=2*n*e.height,s=function(e,t){var i=e.width,r=e.height,a=A(i,t),n=A(r,t),o=M(e.x+Math.abs(a.x),e.y-Math.abs(a.y)),c=M(e.x+e.width+Math.abs(n.y),e.y+Math.abs(n.x)),s=M(e.x-Math.abs(n.y),e.y+e.height-Math.abs(n.x));return{width:T(o,c),height:T(o,s)}}(t,i);return Math.max(s.width/o,s.height/c)},P=function(e,t){var i=e.width,r=i*t;return r>e.height&&(i=(r=e.height)/t),{x:.5*(e.width-i),y:.5*(e.height-r),width:i,height:r}},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.zoom,r=t.rotation,a=t.center,n=t.aspectRatio;n||(n=e.height/e.width);var o=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.height/e.width,a=t,n=1,o=r;o>a&&(n=(o=a)/r);var c=Math.max(1/n,a/o),s=e.width/(i*c*n);return{width:s,height:s*t}}(e,n,i),c={x:.5*o.width,y:.5*o.height},s={x:0,y:0,width:o.width,height:o.height,center:c},h=void 0===t.scaleToFit||t.scaleToFit,u=i*R(e,P(s,n),r,h?a:{x:.5,y:.5});return{widthFloat:o.width/u,heightFloat:o.height/u,width:Math.round(o.width/u),height:Math.round(o.height/u)}},k={type:"spring",stiffness:.5,damping:.45,mass:10},D=function(e){return e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function(e){var t=e.root,i=e.props;i.background&&(t.element.style.backgroundColor=i.background)},create:function(t){var i=t.root,r=t.props;i.ref.image=i.appendChildView(i.createChildView(function(e){return e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:k,originY:k,scaleX:k,scaleY:k,translateX:k,translateY:k,rotateZ:k}},create:function(t){var i=t.root,r=t.props;r.width=r.image.width,r.height=r.image.height,i.ref.bitmap=i.appendChildView(i.createChildView(function(e){return e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:function(e){var t=e.root,i=e.props;t.appendChild(i.image)}})}(e),{image:r.image}))},write:function(e){var t=e.root,i=e.props.crop.flip,r=t.ref.bitmap;r.scaleX=i.horizontal?-1:1,r.scaleY=i.vertical?-1:1}})}(e),Object.assign({},r))),i.ref.createMarkup=function(){i.ref.markup||(i.ref.markup=i.appendChildView(i.createChildView(I(e),Object.assign({},r))))},i.ref.destroyMarkup=function(){i.ref.markup&&(i.removeChildView(i.ref.markup),i.ref.markup=null)};var a=i.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==a&&(i.element.dataset.transparencyIndicator="grid"===a?a:"color")},write:function(e){var t=e.root,i=e.props,r=e.shouldOptimize,a=i.crop,n=i.markup,o=i.resize,c=i.dirty,s=i.width,h=i.height;t.ref.image.crop=a;var u={x:0,y:0,width:s,height:h,center:{x:.5*s,y:.5*h}},l={width:t.ref.image.width,height:t.ref.image.height},d={x:a.center.x*l.width,y:a.center.y*l.height},f={x:u.center.x-l.width*a.center.x,y:u.center.y-l.height*a.center.y},g=2*Math.PI+a.rotation%(2*Math.PI),p=a.aspectRatio||l.height/l.width,m=void 0===a.scaleToFit||a.scaleToFit,y=R(l,P(u,p),g,m?a.center:{x:.5,y:.5}),E=a.zoom*y;n&&n.length?(t.ref.createMarkup(),t.ref.markup.width=s,t.ref.markup.height=h,t.ref.markup.resize=o,t.ref.markup.dirty=c,t.ref.markup.markup=n,t.ref.markup.crop=C(l,a)):t.ref.markup&&t.ref.destroyMarkup();var v=t.ref.image;if(r)return v.originX=null,v.originY=null,v.translateX=null,v.translateY=null,v.rotateZ=null,v.scaleX=null,void(v.scaleY=null);v.originX=d.x,v.originY=d.y,v.translateX=f.x,v.translateY=f.y,v.rotateZ=g,v.scaleX=E,v.scaleY=E}})},G='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>',V=!1,O=0,b=function(){self.onmessage=function(e){createImageBitmap(e.data.message.file).then(function(t){self.postMessage({id:e.data.id,message:t},[t])})}},S=function(){self.onmessage=function(e){for(var t=e.data.message.imageData,i=e.data.message.colorMatrix,r=t.data,a=r.length,n=i[0],o=i[1],c=i[2],s=i[3],h=i[4],u=i[5],l=i[6],d=i[7],f=i[8],g=i[9],p=i[10],m=i[11],y=i[12],E=i[13],v=i[14],w=i[15],_=i[16],I=i[17],M=i[18],x=i[19],T=0,A=0,R=0,P=0,C=0;T<a;T+=4)A=r[T]/255,R=r[T+1]/255,P=r[T+2]/255,C=r[T+3]/255,r[T]=Math.max(0,Math.min(255*(A*n+R*o+P*c+C*s+h),255)),r[T+1]=Math.max(0,Math.min(255*(A*u+R*l+P*d+C*f+g),255)),r[T+2]=Math.max(0,Math.min(255*(A*p+R*m+P*y+C*E+v),255)),r[T+3]=Math.max(0,Math.min(255*(A*w+R*_+P*I+C*M+x),255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},L={1:function(){return[1,0,0,1,0,0]},2:function(e){return[-1,0,0,1,e,0]},3:function(e,t){return[-1,0,0,-1,e,t]},4:function(e,t){return[1,0,0,-1,0,t]},5:function(){return[0,1,1,0,0,0]},6:function(e,t){return[0,1,-1,0,t,0]},7:function(e,t){return[0,-1,-1,0,t,e]},8:function(e){return[0,-1,1,0,0,e]}},N=function(e,t,i,r){t=Math.round(t),i=Math.round(i);var a=document.createElement("canvas");a.width=t,a.height=i;var n=a.getContext("2d");if(r>=5&&r<=8){var o=[i,t];t=o[0],i=o[1]}return function(e,t,i,r){-1!==r&&e.transform.apply(e,L[r](t,i))}(n,t,i,r),n.drawImage(e,0,0,t,i),a},W=function(e){return/^image/.test(e.type)&&!/svg/.test(e.type)},z=function(e){var t=Math.min(10/e.width,10/e.height),i=document.createElement("canvas"),r=i.getContext("2d"),a=i.width=Math.ceil(e.width*t),n=i.height=Math.ceil(e.height*t);r.drawImage(e,0,0,a,n);var o=null;try{o=r.getImageData(0,0,a,n).data}catch(e){return null}for(var c=o.length,s=0,h=0,u=0,l=0;l<c;l+=4)s+=o[l]*o[l],h+=o[l+1]*o[l+1],u+=o[l+2]*o[l+2];return{r:s=H(s,c),g:h=H(h,c),b:u=H(u,c)}},H=function(e,t){return Math.floor(Math.sqrt(e/(t/4)))},q=function(e){var t=e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:function(e){var t=e.root,i=e.props;!V&&document.querySelector("base")&&(G=G.replace(/url\(\#/g,"url("+window.location.href.replace(window.location.hash,"")+"#"),V=!0),O++,t.element.classList.add("filepond--image-preview-overlay-".concat(i.status)),t.element.innerHTML=G.replace(/__UID__/g,O)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),i=function(e){return e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:k,scaleY:k,translateY:k,opacity:{type:"tween",duration:400}}},create:function(t){var i=t.root,r=t.props;i.ref.clip=i.appendChildView(i.createChildView(D(e),{id:r.id,image:r.image,crop:r.crop,markup:r.markup,resize:r.resize,dirty:r.dirty,background:r.background}))},write:function(e){var t=e.root,i=e.props,r=e.shouldOptimize,a=t.ref.clip,n=i.image,o=i.crop,c=i.markup,s=i.resize,h=i.dirty;if(a.crop=o,a.markup=c,a.resize=s,a.dirty=h,a.opacity=r?0:1,!r&&!t.rect.element.hidden){var u=n.height/n.width,l=o.aspectRatio||u,d=t.rect.inner.width,f=t.rect.inner.height,g=t.query("GET_IMAGE_PREVIEW_HEIGHT"),p=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),m=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),y=t.query("GET_PANEL_ASPECT_RATIO"),E=t.query("GET_ALLOW_MULTIPLE");y&&!E&&(g=d*y,l=y);var v=null!==g?g:Math.max(p,Math.min(d*l,m)),w=v/l;w>d&&(v=(w=d)*l),v>f&&(v=f,w=f/l),a.width=w,a.height=v}}})}(e),r=e.utils.createWorker,a=function(e,t,i){return new Promise(function(a){e.ref.imageData||(e.ref.imageData=i.getContext("2d").getImageData(0,0,i.width,i.height));var n=function(e){var t;try{t=new ImageData(e.width,e.height)}catch(i){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t}(e.ref.imageData);if(!t||20!==t.length)return i.getContext("2d").putImageData(n,0,0),a();var o=r(S);o.post({imageData:n,colorMatrix:t},function(e){i.getContext("2d").putImageData(e,0,0),o.terminate(),a()},[n.data.buffer])})},n=function(e){var t=e.root,r=e.props,a=e.image,n=r.id,o=t.query("GET_ITEM",{id:n});if(o){var c,s,h=o.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},u=t.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),l=!1;t.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(c=o.getMetadata("markup")||[],s=o.getMetadata("resize"),l=!0);var d=t.appendChildView(t.createChildView(i,{id:n,image:a,crop:h,resize:s,markup:c,dirty:l,background:u,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),t.childViews.length);t.ref.images.push(d),d.opacity=1,d.scaleX=1,d.scaleY=1,d.translateY=0,setTimeout(function(){t.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:n})},250)}},o=function(e){var t=e.root;t.ref.overlayShadow.opacity=1,t.ref.overlayError.opacity=0,t.ref.overlaySuccess.opacity=0},c=function(e){var t=e.root;t.ref.overlayShadow.opacity=.25,t.ref.overlayError.opacity=1};return e.utils.createView({name:"image-preview-wrapper",create:function(e){var i=e.root;i.ref.images=[],i.ref.imageData=null,i.ref.imageViewBin=[],i.ref.overlayShadow=i.appendChildView(i.createChildView(t,{opacity:0,status:"idle"})),i.ref.overlaySuccess=i.appendChildView(i.createChildView(t,{opacity:0,status:"success"})),i.ref.overlayError=i.appendChildView(i.createChildView(t,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:function(e){e.root.ref.images.forEach(function(e){e.image.width=1,e.image.height=1})},didWriteView:function(e){e.root.ref.images.forEach(function(e){e.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:function(e){var t=e.root,i=t.ref.images[t.ref.images.length-1];i.translateY=0,i.scaleX=1,i.scaleY=1,i.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:function(e){var t=e.root,i=e.props.id,r=t.query("GET_ITEM",i);if(r){var a,n,o,c=URL.createObjectURL(r.file);a=c,n=function(e,r){t.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:i,width:e,height:r})},(o=new Image).onload=function(){var e=o.naturalWidth,t=o.naturalHeight;o=null,n(e,t)},o.src=a}},DID_FINISH_CALCULATE_PREVIEWSIZE:function(e){var t=e.root,i=e.props,o=i.id,c=t.query("GET_ITEM",o);if(c){var s,h,u=URL.createObjectURL(c.file),l=function(){var e;(e=u,new Promise(function(t,i){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){t(r)},r.onerror=function(e){i(e)},r.src=e})).then(d)},d=function(e){URL.revokeObjectURL(u);var r=(c.getMetadata("exif")||{}).orientation||-1,o=e.width,s=e.height;if(r>=5&&r<=8){var h=[s,o];o=h[0],s=h[1]}var l=Math.max(1,.75*window.devicePixelRatio),d=t.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*l,f=s/o,g=t.rect.element.width,p=t.rect.element.height,m=g,y=m*f;f>1?y=(m=Math.min(o,g*d))*f:m=(y=Math.min(s,p*d))/f;var E=N(e,m,y,r),v=function(){var r=t.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?z(data):null;c.setMetadata("color",r,!0),"close"in e&&e.close(),t.ref.overlayShadow.opacity=1,n({root:t,props:i,image:E})},w=c.getMetadata("filter");w?a(t,w,E).then(v):v()};if(s=c.file,!(((h=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./))?parseInt(h[1]):null)<=58)&&"createImageBitmap"in window&&W(s)){var f=r(b);f.post({file:c.file},function(e){f.terminate(),e?d(e):l()})}else l()}},DID_UPDATE_ITEM_METADATA:function(e){var t=e.root,i=e.props,r=e.action;if(/crop|filter|markup|resize/.test(r.change.key)&&t.ref.images.length){var o=t.query("GET_ITEM",{id:i.id});if(o)if(/filter/.test(r.change.key)){var c=t.ref.images[t.ref.images.length-1];a(t,r.change.value,c.image)}else{if(/crop|markup|resize/.test(r.change.key)){var s=o.getMetadata("crop"),h=t.ref.images[t.ref.images.length-1];if(Math.abs(s.aspectRatio-h.crop.aspectRatio)>1e-5){var u=function(e){var t=e.root,i=t.ref.images.shift();return i.opacity=0,i.translateY=-15,t.ref.imageViewBin.push(i),i}({root:t});n({root:t,props:i,image:(l=u.image,(d=d||document.createElement("canvas")).width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0),d)})}else!function(e){var t=e.root,i=e.props,r=t.query("GET_ITEM",{id:i.id});if(r){var a=t.ref.images[t.ref.images.length-1];a.crop=r.getMetadata("crop"),a.background=t.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),t.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(a.dirty=!0,a.resize=r.getMetadata("resize"),a.markup=r.getMetadata("markup"))}}({root:t,props:i})}var l,d}}},DID_THROW_ITEM_LOAD_ERROR:c,DID_THROW_ITEM_PROCESSING_ERROR:c,DID_THROW_ITEM_INVALID:c,DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root;t.ref.overlayShadow.opacity=.25,t.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:o,DID_REVERT_ITEM_PROCESSING:o},function(e){var t=e.root,i=t.ref.imageViewBin.filter(function(e){return 0===e.opacity});t.ref.imageViewBin=t.ref.imageViewBin.filter(function(e){return e.opacity>0}),i.forEach(function(e){return function(e,t){e.removeChildView(t),t.image.width=1,t.image.height=1,t._destroy()}(t,e)}),i.length=0})})},F=function(e){var t=e.addFilter,i=e.utils,r=i.Type,a=i.createRoute,n=i.isFile,o=q(e);return t("CREATE_VIEW",function(e){var t=e.is,i=e.view,r=e.query;if(t("file")&&r("GET_ALLOW_IMAGE_PREVIEW")){var c=function(e){e.root.ref.shouldRescale=!0};i.registerWriter(a({DID_RESIZE_ROOT:c,DID_STOP_RESIZE:c,DID_LOAD_ITEM:function(e){var t=e.root,a=e.props.id,c=r("GET_ITEM",a);if(c&&n(c.file)&&!c.archived){var s=c.file;if(function(e){return/^image/.test(e.type)}(s)&&r("GET_IMAGE_PREVIEW_FILTER_ITEM")(c)){var h="createImageBitmap"in(window||{}),u=r("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!(!h&&u&&s.size>u)){t.ref.imagePreview=i.appendChildView(i.createChildView(o,{id:a}));var l=t.query("GET_IMAGE_PREVIEW_HEIGHT");l&&t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:c.id,height:l});var d=!h&&s.size>r("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");t.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:a},d)}}}},DID_IMAGE_PREVIEW_CALCULATE_SIZE:function(e){var t=e.root,i=e.action;t.ref.imageWidth=i.width,t.ref.imageHeight=i.height,t.ref.shouldRescale=!0,t.ref.shouldDrawPreview=!0,t.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:function(e){var t=e.root;"crop"===e.action.change.key&&(t.ref.shouldRescale=!0)}},function(e){var t=e.root,i=e.props;t.ref.imagePreview&&(t.rect.element.hidden||(t.ref.shouldRescale&&(!function(e,t){if(e.ref.imagePreview){var i=t.id,r=e.query("GET_ITEM",{id:i});if(r){var a=e.query("GET_PANEL_ASPECT_RATIO"),n=e.query("GET_ITEM_PANEL_ASPECT_RATIO"),o=e.query("GET_IMAGE_PREVIEW_HEIGHT");if(!(a||n||o)){var c=e.ref,s=c.imageWidth,h=c.imageHeight;if(s&&h){var u=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),l=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),d=(r.getMetadata("exif")||{}).orientation||-1;if(d>=5&&d<=8){var f=[h,s];s=f[0],h=f[1]}if(!W(r.file)||e.query("GET_IMAGE_PREVIEW_UPSCALE")){var g=2048/s;s*=g,h*=g}var p=h/s,m=(r.getMetadata("crop")||{}).aspectRatio||p,y=Math.max(u,Math.min(h,l)),E=e.rect.element.width,v=Math.min(E*m,y);e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:r.id,height:v})}}}}}(t,i),t.ref.shouldRescale=!1),t.ref.shouldDrawPreview&&(requestAnimationFrame(function(){t.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:i.id})}),t.ref.shouldDrawPreview=!1)))}))}}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[function(){return!0},r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[function(){return!0},r.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:F})),F});


/*!
 * FilePondPluginImageResize 2.0.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginImageResize=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils.Type;return t("DID_LOAD_ITEM",function(e,t){var n=t.query;return new Promise(function(t,i){var r=e.file;if(!function(e){return/^image/.test(e.type)}(r)||!n("GET_ALLOW_IMAGE_RESIZE"))return t(e);var o=n("GET_IMAGE_RESIZE_MODE"),u=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),a=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),l=n("GET_IMAGE_RESIZE_UPSCALE");if(null===u&&null===a)return t(e);var d,E,f,s=null===u?a:u,c=null===a?s:a,I=URL.createObjectURL(r);d=I,E=function(n){if(URL.revokeObjectURL(I),!n)return t(e);var i=n.width,r=n.height,u=(e.getMetadata("exif")||{}).orientation||-1;if(u>=5&&u<=8){var a=[r,i];i=a[0],r=a[1]}return i===s&&r===c?t(e):i<=s&&r<=c&&!l?t(e):(e.setMetadata("resize",{mode:o,upscale:l,size:{width:s,height:c}}),void t(e))},(f=new Image).onload=function(){var e=f.naturalWidth,t=f.naturalHeight;f=null,E({width:e,height:t})},f.onerror=function(){return E(null)},f.src=d})}),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});


/*!
 * FilePondPluginImageTransform 3.7.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).FilePondPluginImageTransform=e()}(this,function(){"use strict";var t={jpeg:"jpg","svg+xml":"svg"},e={1:function(){return[1,0,0,1,0,0]},2:function(t){return[-1,0,0,1,t,0]},3:function(t,e){return[-1,0,0,-1,t,e]},4:function(t,e){return[1,0,0,-1,0,e]},5:function(){return[0,1,1,0,0,0]},6:function(t,e){return[0,1,-1,0,e,0]},7:function(t,e){return[0,-1,-1,0,e,t]},8:function(t){return[0,-1,1,0,0,t]}},n=function(t,e){return{x:t,y:e}},r=function(t,e){return n(t.x-e.x,t.y-e.y)},i=function(t,e){return Math.sqrt(function(t,e){return function(t,e){return t.x*e.x+t.y*e.y}(r(t,e),r(t,e))}(t,e))},a=function(t,e){var r=t,i=e,a=1.5707963267948966-e,o=Math.sin(1.5707963267948966),u=Math.sin(i),c=Math.sin(a),l=Math.cos(a),h=r/o;return n(l*(h*u),l*(h*c))},o=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:.5,y:.5},u=o.x>.5?1-o.x:o.x,c=o.y>.5?1-o.y:o.y,l=2*u*t.width,h=2*c*t.height,f=function(t,e){var r=t.width,o=t.height,u=a(r,e),c=a(o,e),l=n(t.x+Math.abs(u.x),t.y-Math.abs(u.y)),h=n(t.x+t.width+Math.abs(c.y),t.y+Math.abs(c.x)),f=n(t.x-Math.abs(c.y),t.y+t.height-Math.abs(c.x));return{width:i(l,h),height:i(l,f)}}(e,r);return Math.max(f.width/l,f.height/h)},u=function(t,e){var n=t.width,r=n*e;return r>t.height&&(n=(r=t.height)/e),{x:.5*(t.width-n),y:.5*(t.height-r),width:n,height:r}},c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.height/t.width,i=e,a=1,o=r;o>i&&(a=(o=i)/r);var u=Math.max(1/a,i/o),c=t.width/(n*u*a);return{width:c,height:c*e}},l=function(t){t.width=1,t.height=1,t.getContext("2d").clearRect(0,0,1,1)},h=function(t){return t&&(t.horizontal||t.vertical)},f=function(t,n,r){if(n<=1&&!h(r))return t.width=t.naturalWidth,t.height=t.naturalHeight,t;var i=document.createElement("canvas"),a=t.naturalWidth,o=t.naturalHeight,u=n>=5&&n<=8;u?(i.width=o,i.height=a):(i.width=a,i.height=o);var c=i.getContext("2d");if(n&&c.transform.apply(c,function(t,n,r){return-1===r&&(r=1),e[r](t,n)}(a,o,n)),h(r)){var l=[1,0,0,1,0,0];(!u&&r.horizontal||u&r.vertical)&&(l[0]=-1,l[4]=a),(!u&&r.vertical||u&&r.horizontal)&&(l[3]=-1,l[5]=o),c.transform.apply(c,l)}return c.drawImage(t,0,0,a,o),i};"undefined"!=typeof window&&void 0!==window.document&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){var r=this.toDataURL(e,n).split(",")[1];setTimeout(function(){for(var n=atob(r),i=n.length,a=new Uint8Array(i),o=0;o<i;o++)a[o]=n.charCodeAt(o);t(new Blob([a],{type:e||"image/png"}))})}}));var s=function(t,e){return y(t.x*e,t.y*e)},d=function(t,e){return y(t.x+e.x,t.y+e.y)},g=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:y(t.x/e,t.y/e)},v=function(t,e,n){var r=Math.cos(e),i=Math.sin(e),a=y(t.x-n.x,t.y-n.y);return y(n.x+r*a.x-i*a.y,n.y+i*a.x+r*a.y)},y=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},m=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0;return"string"==typeof t?parseFloat(t)*n:"number"==typeof t?t*(r?e[r]:Math.min(e.width,e.height)):void 0},p=function(t,e,n){var r=t.borderStyle||t.lineStyle||"solid",i=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=m(t.borderWidth||t.lineWidth,e,n);return{"stroke-linecap":t.lineCap||"round","stroke-linejoin":t.lineJoin||"round","stroke-width":o||0,"stroke-dasharray":"string"==typeof r?"":r.map(function(t){return m(t,e,n)}).join(","),stroke:a,fill:i,opacity:t.opacity||1}},w=function(t){return null!=t},x=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=m(t.x,e,n,"width")||m(t.left,e,n,"width"),i=m(t.y,e,n,"height")||m(t.top,e,n,"height"),a=m(t.width,e,n,"width"),o=m(t.height,e,n,"height"),u=m(t.right,e,n,"width"),c=m(t.bottom,e,n,"height");return w(i)||(i=w(o)&&w(c)?e.height-o-c:c),w(r)||(r=w(a)&&w(u)?e.width-a-u:u),w(a)||(a=w(r)&&w(u)?e.width-r-u:0),w(o)||(o=w(i)&&w(c)?e.height-i-c:0),{x:r||0,y:i||0,width:a||0,height:o||0}},M=function(t,e){return Object.keys(e).forEach(function(n){return t.setAttribute(n,e[n])})},T=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return e&&M(n,e),n},b={contain:"xMidYMid meet",cover:"xMidYMid slice"},A={left:"start",center:"middle",right:"end"},R=function(t){return function(e){return T(t,{id:e.id})}},O={image:function(t){var e=T("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=function(){e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},rect:R("rect"),ellipse:R("ellipse"),text:R("text"),path:R("path"),line:function(t){var e=T("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=T("line");e.appendChild(n);var r=T("path");e.appendChild(r);var i=T("path");return e.appendChild(i),e}},_={rect:function(t){return M(t,Object.assign({},t.rect,t.styles))},ellipse:function(t){var e=t.rect.x+.5*t.rect.width,n=t.rect.y+.5*t.rect.height,r=.5*t.rect.width,i=.5*t.rect.height;return M(t,Object.assign({cx:e,cy:n,rx:r,ry:i},t.styles))},image:function(t,e){M(t,Object.assign({},t.rect,t.styles,{preserveAspectRatio:b[e.fit]||"none"}))},text:function(t,e,n,r){var i=m(e.fontSize,n,r),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",u=A[e.textAlign]||"start";M(t,Object.assign({},t.rect,t.styles,{"stroke-width":0,"font-weight":o,"font-size":i,"font-family":a,"text-anchor":u})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},path:function(t,e,n,r){var i;M(t,Object.assign({},t.styles,{fill:"none",d:(i=e.points.map(function(t){return{x:m(t.x,n,r,"width"),y:m(t.y,n,r,"height")}}),i.map(function(t,e){return"".concat(0===e?"M":"L"," ").concat(t.x," ").concat(t.y)}).join(" "))}))},line:function(t,e,n,r){M(t,Object.assign({},t.rect,t.styles,{fill:"none"}));var i=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],u=t.rect,c={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(M(i,{x1:u.x,y1:u.y,x2:c.x,y2:c.y}),e.lineDecoration){a.style.display="none",o.style.display="none";var l=g({x:c.x-u.x,y:c.y-u.y}),h=m(.05,n,r);if(-1!==e.lineDecoration.indexOf("arrow-begin")){var f=s(l,h),y=d(u,f),p=v(u,2,y),w=v(u,-2,y);M(a,{style:"display:block;",d:"M".concat(p.x,",").concat(p.y," L").concat(u.x,",").concat(u.y," L").concat(w.x,",").concat(w.y)})}if(-1!==e.lineDecoration.indexOf("arrow-end")){var x=s(l,-h),T=d(c,x),b=v(c,2,T),A=v(c,-2,T);M(o,{style:"display:block;",d:"M".concat(b.x,",").concat(b.y," L").concat(c.x,",").concat(c.y," L").concat(A.x,",").concat(A.y)})}}}},I=function(t,e){return t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(function(i){var a=r.background,c=void 0===a?null:a,l=new FileReader;l.onloadend=function(){var t=l.result,r=document.createElement("div");r.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",r.innerHTML=t;var a=r.querySelector("svg");document.body.appendChild(r);var h=a.getBBox();r.parentNode.removeChild(r);var f=r.querySelector("title"),s=a.getAttribute("viewBox")||"",d=a.getAttribute("width")||"",g=a.getAttribute("height")||"",v=parseFloat(d)||null,y=parseFloat(g)||null,m=(d.match(/[a-z]+/)||[])[0]||"",w=(g.match(/[a-z]+/)||[])[0]||"",M=s.split(" ").map(parseFloat),T=M.length?{x:M[0],y:M[1],width:M[2],height:M[3]}:h,b=null!=v?v:T.width,A=null!=y?y:T.height;a.style.overflow="visible",a.setAttribute("width",b),a.setAttribute("height",A);var R="";if(n&&n.length){var E={width:b,height:A};R=n.sort(I).reduce(function(t,e){var n,r,i=(n=e[0],r=e[1],O[n](r));return function(t,e,n,r,i){"path"!==e&&(t.rect=x(n,r,i)),t.styles=p(n,r,i),_[e](t,n,r,i)}(i,e[0],e[1],E),i.removeAttribute("id"),1===i.getAttribute("opacity")&&i.removeAttribute("opacity"),t+"\n"+i.outerHTML+"\n"},""),R="\n\n<g>".concat(R.replace(/&nbsp;/g," "),"</g>\n\n")}var N=e.aspectRatio||A/b,L=b,S=L*N,C=void 0===e.scaleToFit||e.scaleToFit,k=e.center?e.center.x:.5,U=e.center?e.center.y:.5,P=o({width:b,height:A},u({width:L,height:S},N),e.rotation,C?{x:k,y:U}:{x:.5,y:.5}),B=e.zoom*P,F=e.rotation*(180/Math.PI),G={x:.5*L,y:.5*S},j={x:G.x-b*k,y:G.y-A*U},z=["rotate(".concat(F," ").concat(G.x," ").concat(G.y,")"),"translate(".concat(G.x," ").concat(G.y,")"),"scale(".concat(B,")"),"translate(".concat(-G.x," ").concat(-G.y,")"),"translate(".concat(j.x," ").concat(j.y,")")],D=e.flip&&e.flip.horizontal,q=e.flip&&e.flip.vertical,H=["scale(".concat(D?-1:1," ").concat(q?-1:1,")"),"translate(".concat(D?-b:0," ").concat(q?-A:0,")")],V='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="'.concat(L).concat(m,'" height="').concat(S).concat(w,'" \nviewBox="0 0 ').concat(L," ").concat(S,'" ').concat(c?'style="background:'+c+'" ':"",'\npreserveAspectRatio="xMinYMin"\nxmlns:xlink="http://www.w3.org/1999/xlink"\nxmlns="http://www.w3.org/2000/svg">\n\x3c!-- Generated by PQINA - https://pqina.nl/ --\x3e\n<title>').concat(f?f.textContent:"",'</title>\n<g transform="').concat(z.join(" "),'">\n<g transform="').concat(H.join(" "),'">\n').concat(a.outerHTML).concat(R,"\n</g>\n</g>\n</svg>");i(V)},l.readAsText(t)})},N=function(){var t={resize:function(t,e){var n=e.mode,r=void 0===n?"contain":n,i=e.upscale,o=void 0!==i&&i,l=e.width,h=e.height,f=e.matrix;if(f=!f||u(f)?null:f,!l&&!h)return c(t,f);null===l?l=h:null===h&&(h=l);if("force"!==r){var s=l/t.width,d=h/t.height,g=1;if("cover"===r?g=Math.max(s,d):"contain"===r&&(g=Math.min(s,d)),g>1&&!1===o)return c(t,f);l=t.width*g,h=t.height*g}for(var v=t.width,y=t.height,m=Math.round(l),p=Math.round(h),w=t.data,x=new Uint8ClampedArray(m*p*4),M=v/m,T=y/p,b=Math.ceil(.5*M),A=Math.ceil(.5*T),R=0;R<p;R++)for(var O=0;O<m;O++){for(var _=4*(O+R*m),I=0,E=0,N=0,L=0,S=0,C=0,k=0,U=(R+.5)*T,P=Math.floor(R*T);P<(R+1)*T;P++)for(var B=Math.abs(U-(P+.5))/A,F=(O+.5)*M,G=B*B,j=Math.floor(O*M);j<(O+1)*M;j++){var z=Math.abs(F-(j+.5))/b,D=Math.sqrt(G+z*z);if(D>=-1&&D<=1&&(I=2*D*D*D-3*D*D+1)>0){var q=w[(z=4*(j+P*v))+3];k+=I*q,N+=I,q<255&&(I=I*q/250),L+=I*w[z],S+=I*w[z+1],C+=I*w[z+2],E+=I}}x[_]=L/E,x[_+1]=S/E,x[_+2]=C/E,x[_+3]=k/N,f&&a(_,x,f)}return{data:x,width:m,height:p}},filter:c},e=function(e,n){var r=e.transforms,i=null;if(r.forEach(function(t){"filter"===t.type&&(i=t)}),i){var a=null;r.forEach(function(t){"resize"===t.type&&(a=t)}),a&&(a.data.matrix=i.data,r=r.filter(function(t){return"filter"!==t.type}))}n(function(e,n){return e.forEach(function(e){n=t[e.type](n,e.data)}),n}(r,e.imageData))};self.onmessage=function(t){e(t.data.message,function(e){self.postMessage({id:t.data.id,message:e},[e.data.buffer])})};var n=1,r=1,i=1;function a(t,e,a){var o=e[t]/255,u=e[t+1]/255,c=e[t+2]/255,l=e[t+3]/255,h=o*a[0]+u*a[1]+c*a[2]+l*a[3]+a[4],f=o*a[5]+u*a[6]+c*a[7]+l*a[8]+a[9],s=o*a[10]+u*a[11]+c*a[12]+l*a[13]+a[14],d=o*a[15]+u*a[16]+c*a[17]+l*a[18]+a[19],g=Math.max(0,h*d)+n*(1-d),v=Math.max(0,f*d)+r*(1-d),y=Math.max(0,s*d)+i*(1-d);e[t]=255*Math.max(0,Math.min(1,g)),e[t+1]=255*Math.max(0,Math.min(1,v)),e[t+2]=255*Math.max(0,Math.min(1,y))}var o=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function u(t){return self.JSON.stringify(t||[])===o}function c(t,e){if(!e||u(e))return t;for(var a=t.data,o=a.length,c=e[0],l=e[1],h=e[2],f=e[3],s=e[4],d=e[5],g=e[6],v=e[7],y=e[8],m=e[9],p=e[10],w=e[11],x=e[12],M=e[13],T=e[14],b=e[15],A=e[16],R=e[17],O=e[18],_=e[19],I=0,E=0,N=0,L=0,S=0,C=0,k=0,U=0,P=0,B=0,F=0,G=0;I<o;I+=4)C=(E=a[I]/255)*c+(N=a[I+1]/255)*l+(L=a[I+2]/255)*h+(S=a[I+3]/255)*f+s,k=E*d+N*g+L*v+S*y+m,U=E*p+N*w+L*x+S*M+T,P=E*b+N*A+L*R+S*O+_,B=Math.max(0,C*P)+n*(1-P),F=Math.max(0,k*P)+r*(1-P),G=Math.max(0,U*P)+i*(1-P),a[I]=255*Math.max(0,Math.min(1,B)),a[I+1]=255*Math.max(0,Math.min(1,F)),a[I+2]=255*Math.max(0,Math.min(1,G));return t}},L=function(t,e){if(1165519206===t.getUint32(e+4,!1)){e+=4;var n=18761===t.getUint16(e+=6,!1);e+=t.getUint32(e+4,n);var r=t.getUint16(e,n);e+=2;for(var i=0;i<r;i++)if(274===t.getUint16(e+12*i,n))return t.setUint16(e+12*i+8,1,n),!0;return!1}},S=function(t){return new Promise(function(e){var n=new FileReader;n.onload=function(){return e(function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return null;for(var n,r,i=2,a=!1;i<e.byteLength&&(n=e.getUint16(i,!1),r=e.getUint16(i+2,!1)+2,n>=65504&&n<=65519||65534===n)&&(a||(a=L(e,i)),!(i+r>e.byteLength));)i+=r;return t.slice(0,i)}(n.result)||null)},n.readAsArrayBuffer(t.slice(0,262144))})},C=function(t,e){var n=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n){var r=new n;return r.append(t),r.getBlob(e)}return new Blob([t],{type:e})},k=function(t){var e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),r=new Worker(n),i=[];return{transfer:function(){},post:function(t,e,n){var a=Math.random().toString(36).substr(2,9);i[a]=e,r.onmessage=function(t){var e=i[t.data.id];e&&(e(t.data.message),delete i[t.data.id])},r.postMessage({id:a,message:t},n)},terminate:function(){r.terminate(),URL.revokeObjectURL(n)}}},U=function(t,e){return new Promise(function(n){var r,i={width:t.width,height:t.height},a=t.getContext("2d"),o=e.sort(I).map(function(t){return function(){return new Promise(function(e){F[t[0]](a,i,t[1],e)&&e()})}});(r=o,r.reduce(function(t,e){return t.then(function(t){return e().then(Array.prototype.concat.bind(t))})},Promise.resolve([]))).then(function(){return n(t)})})},P=function(t,e){t.beginPath(),t.lineCap=e["stroke-linecap"],t.lineJoin=e["stroke-linejoin"],t.lineWidth=e["stroke-width"],e["stroke-dasharray"].length&&t.setLineDash(e["stroke-dasharray"].split(",")),t.fillStyle=e.fill,t.strokeStyle=e.stroke,t.globalAlpha=e.opacity||1},B=function(t){t.fill(),t.stroke(),t.globalAlpha=1},F={rect:function(t,e,n){var r=x(n,e),i=p(n,e);return P(t,i),t.rect(r.x,r.y,r.width,r.height),B(t),!0},ellipse:function(t,e,n){var r=x(n,e),i=p(n,e);P(t,i);var a=r.x,o=r.y,u=r.width,c=r.height,l=u/2*.5522848,h=c/2*.5522848,f=a+u,s=o+c,d=a+u/2,g=o+c/2;return t.moveTo(a,g),t.bezierCurveTo(a,g-h,d-l,o,d,o),t.bezierCurveTo(d+l,o,f,g-h,f,g),t.bezierCurveTo(f,g+h,d+l,s,d,s),t.bezierCurveTo(d-l,s,a,g+h,a,g),B(t),!0},image:function(t,e,n,r){var i=x(n,e),a=p(n,e);P(t,a);var o=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(o.crossOrigin=""),o.onload=function(){if("cover"===n.fit){var e=i.width/i.height,a=e>1?o.width:o.height*e,u=e>1?o.width/e:o.height,c=.5*o.width-.5*a,l=.5*o.height-.5*u;t.drawImage(o,c,l,a,u,i.x,i.y,i.width,i.height)}else if("contain"===n.fit){var h=Math.min(i.width/o.width,i.height/o.height),f=h*o.width,s=h*o.height,d=i.x+.5*i.width-.5*f,g=i.y+.5*i.height-.5*s;t.drawImage(o,0,0,o.width,o.height,d,g,f,s)}else t.drawImage(o,0,0,o.width,o.height,i.x,i.y,i.width,i.height);B(t),r()},o.src=n.src},text:function(t,e,n){var r=x(n,e),i=p(n,e);P(t,i);var a=m(n.fontSize,e),o=n.fontFamily||"sans-serif",u=n.fontWeight||"normal",c=n.textAlign||"left";return t.font="".concat(u," ").concat(a,"px ").concat(o),t.textAlign=c,t.fillText(n.text,r.x,r.y),B(t),!0},line:function(t,e,n){var r=x(n,e),i=p(n,e);P(t,i),t.beginPath();var a={x:r.x,y:r.y},o={x:r.x+r.width,y:r.y+r.height};t.moveTo(a.x,a.y),t.lineTo(o.x,o.y);var u=g({x:o.x-a.x,y:o.y-a.y}),c=.04*Math.min(e.width,e.height);if(-1!==n.lineDecoration.indexOf("arrow-begin")){var l=s(u,c),h=d(a,l),f=v(a,2,h),y=v(a,-2,h);t.moveTo(f.x,f.y),t.lineTo(a.x,a.y),t.lineTo(y.x,y.y)}if(-1!==n.lineDecoration.indexOf("arrow-end")){var m=s(u,-c),w=d(o,m),M=v(o,2,w),T=v(o,-2,w);t.moveTo(M.x,M.y),t.lineTo(o.x,o.y),t.lineTo(T.x,T.y)}return B(t),!0},path:function(t,e,n){var r=p(n,e);P(t,r),t.beginPath();var i=n.points.map(function(t){return{x:m(t.x,e,1,"width"),y:m(t.y,e,1,"height")}});t.moveTo(i[0].x,i[0].y);for(var a=i.length,o=1;o<a;o++)t.lineTo(i[o].x,i[o].y);return B(t),!0}},G=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(r,i){if(!t||!function(t){return/^image/.test(t.type)}(t))return i({status:"not an image file",file:t});var a=n.stripImageHead,h=n.beforeCreateBlob,s=n.afterCreateBlob,d=n.canvasMemoryLimit,g=e.crop,v=e.size,y=e.filter,m=e.markup,p=e.output,w=e.image&&e.image.orientation?Math.max(1,Math.min(8,e.image.orientation)):null,x=p&&p.quality,M=null===x?null:x/100,T=p&&p.type||null,b=p&&p.background||null,A=[];!v||"number"!=typeof v.width&&"number"!=typeof v.height||A.push({type:"resize",data:v}),y&&20===y.length&&A.push({type:"filter",data:y});var R=function(t){var e=s?s(t):t;Promise.resolve(e).then(r)},O=function(e,n){var r=function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e}(e),o=m.length?U(r,m):r;Promise.resolve(o).then(function(e){(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(r){var i=n?n(t):t;Promise.resolve(i).then(function(t){t.toBlob(r,e.type,e.quality)})})})(e,n,h).then(function(n){if(l(e),a)return R(n);S(t).then(function(t){null!==t&&(n=new Blob([t,n.slice(20)],{type:n.type})),R(n)})}).catch(i)})};if(/svg/.test(t.type)&&null===T)return E(t,g,m,{background:b}).then(function(t){r(C(t,"image/svg+xml"))});var _=URL.createObjectURL(t);(function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=function(t){n(t)},r.src=t})})(_).then(function(e){URL.revokeObjectURL(_);var n=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.canvasMemoryLimit,a=r.background,h=void 0===a?null:a,s=n.zoom||1,d=f(t,e,n.flip),g={width:d.width,height:d.height},v=n.aspectRatio||g.height/g.width,y=c(g,v,s);if(i){var m=y.width*y.height;if(m>i){var p=Math.sqrt(i)/Math.sqrt(m);g.width=Math.floor(g.width*p),g.height=Math.floor(g.height*p),y=c(g,v,s)}}var w=document.createElement("canvas"),x={x:.5*y.width,y:.5*y.height},M={x:0,y:0,width:y.width,height:y.height,center:x},T=void 0===n.scaleToFit||n.scaleToFit,b=s*o(g,u(M,v),n.rotation,T?n.center:{x:.5,y:.5});w.width=Math.round(y.width/b),w.height=Math.round(y.height/b),x.x/=b,x.y/=b;var A=x.x-g.width*(n.center?n.center.x:.5),R=x.y-g.height*(n.center?n.center.y:.5),O=w.getContext("2d");h&&(O.fillStyle=h,O.fillRect(0,0,w.width,w.height)),O.translate(x.x,x.y),O.rotate(n.rotation||0),O.drawImage(d,A-x.x,R-x.y,g.width,g.height);var _=O.getImageData(0,0,w.width,w.height);return l(w),_}(e,w,g,{canvasMemoryLimit:d,background:b}),r={quality:M,type:T||t.type};if(!A.length)return O(n,r);var i=k(N);i.post({transforms:A,imageData:n},function(t){O(function(t){var e;try{e=new ImageData(t.width,t.height)}catch(n){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e}(t),r),i.terminate()},[n.data.buffer])}).catch(i)})};function j(t){this.wrapped=t}function z(t){var e,n;function r(e,n){try{var a=t[e](n),o=a.value,u=o instanceof j;Promise.resolve(u?o.wrapped:o).then(function(t){u?r("next",t):i(a.done?"return":"normal",t)},function(t){r("throw",t)})}catch(t){i("throw",t)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise(function(a,o){var u={key:t,arg:i,resolve:a,reject:o,next:null};n?n=n.next=u:(e=n=u,r(t,i))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(z.prototype[Symbol.asyncIterator]=function(){return this}),z.prototype.next=function(t){return this._invoke("next",t)},z.prototype.throw=function(t){return this._invoke("throw",t)},z.prototype.return=function(t){return this._invoke("return",t)};function D(t,e){return q(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(t,e)||H()}function q(t){if(Array.isArray(t))return t}function H(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var V=["x","y","left","top","right","bottom","width","height"],W=function(t){var e=D(t,2),n=e[0],r=e[1],i=r.points?{}:V.reduce(function(t,e){var n;return t[e]="string"==typeof(n=r[e])&&/%/.test(n)?parseFloat(n)/100:n,t},{});return[n,Object.assign({zIndex:0},r,i)]};"undefined"!=typeof window&&void 0!==window.document&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){var r=this;setTimeout(function(){for(var i=r.toDataURL(e,n).split(",")[1],a=atob(i),o=a.length,u=new Uint8Array(o);o--;)u[o]=a.charCodeAt(o);t(new Blob([u],{type:e||"image/png"}))})}}));var Y="undefined"!=typeof window&&void 0!==window.document,J=Y&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Q=function(e){var n=e.addFilter,r=e.utils,i=r.Type,a=r.forin,o=r.getFileFromBlob,u=r.isFile,c=["crop","resize","filter","markup","output"],l=function(t){return null===t.aspectRatio&&0===t.rotation&&1===t.zoom&&t.center&&.5===t.center.x&&.5===t.center.y&&t.flip&&!1===t.flip.horizontal&&!1===t.flip.vertical};n("SHOULD_PREPARE_OUTPUT",function(t,e){var n=e.query;return new Promise(function(t){t(!n("IS_ASYNC"))})});var h=function(t,e,n){return new Promise(function(r){if(!t("GET_ALLOW_IMAGE_TRANSFORM")||n.archived||!u(e)||!function(t){return/^image/.test(t.type)}(e))return r(!1);(function(t){return new Promise(function(e,n){var r=new Image;r.src=URL.createObjectURL(t);var i=function(){var t=r.naturalWidth,n=r.naturalHeight;t&&n&&(URL.revokeObjectURL(r.src),clearInterval(a),e({width:t,height:n}))};r.onerror=function(t){URL.revokeObjectURL(r.src),clearInterval(a),n(t)};var a=setInterval(i,1);i()})})(e).then(function(){var n=t("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(n){var i=n(e);if(null==i)return handleRevert(!0);if("boolean"==typeof i)return r(i);if("function"==typeof i.then)return i.then(r)}r(!0)}).catch(function(t){r(!1)})})};return n("PREPARE_OUTPUT",function(e,n){var r=n.query,i=n.item;return new Promise(function(n){h(r,e,i).then(function(u){if(!u)return n(e);var h=[];r("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&h.push(function(){return new Promise(function(t){t({name:r("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:e})})}),r("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&h.push(function(t,e,n){return new Promise(function(i){t(e,n).then(function(t){return i({name:r("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:t})})})});var f=r("GET_IMAGE_TRANSFORM_VARIANTS")||{};a(f,function(t,e){var n,r=(n=e,function(t,e,r){return t(e,n?n(r):r)});h.push(function(e,n,i){return new Promise(function(a){r(e,n,i).then(function(e){return a({name:t,file:e})})})})});var s=r("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),d=r("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),g=null===s?null:s/100,v=r("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),y=r("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||c;i.setMetadata("output",{type:v,quality:g,client:y},!0);var m=function(e,n){return new Promise(function(i,a){var u=Object.assign({},n);Object.keys(u).filter(function(t){return"exif"!==t}).forEach(function(t){-1===y.indexOf(t)&&delete u[t]});var c=u.resize,h=u.exif,f=u.output,s=u.crop,g=u.filter,v=u.markup,m={image:{orientation:h?h.orientation:null},output:f&&(f.type||"number"==typeof f.quality||f.background)?{type:f.type,quality:"number"==typeof f.quality?100*f.quality:null,background:f.background||r("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:c&&(c.size.width||c.size.height)?Object.assign({mode:c.mode,upscale:c.upscale},c.size):void 0,crop:s&&!l(s)?Object.assign({},s):void 0,markup:v&&v.length?v.map(W):[],filter:g};if(m.output){var p=!!f.type&&f.type!==e.type,w=/\/jpe?g$/.test(e.type),x=null!==f.quality&&(w&&"always"===d);if(!!!(m.size||m.crop||m.filter||p||x))return i(e)}var M={beforeCreateBlob:r("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:r("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:r("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:r("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};G(e,m,M).then(function(n){var r,a=o(n,function(e,n){var r=function(t){return t.substr(0,t.lastIndexOf("."))||t}(e),i=n.split("/")[1],a=t[i]||i;return"".concat(r,".").concat(a)}(e.name,(r=n.type,/jpeg|png|svg\+xml/.test(r)?r:"image/jpeg")));i(a)}).catch(a)})},p=h.map(function(t){return t(m,e,i.getMetadata())});Promise.all(p).then(function(t){n(1===t.length&&null===t[0].name?t[0].file:t)})})})}),{options:{allowImageTransform:[!0,i.BOOLEAN],imageTransformImageFilter:[null,i.FUNCTION],imageTransformOutputMimeType:[null,i.STRING],imageTransformOutputQuality:[null,i.INT],imageTransformOutputStripImageHead:[!0,i.BOOLEAN],imageTransformClientTransforms:[null,i.ARRAY],imageTransformOutputQualityMode:["always",i.STRING],imageTransformVariants:[null,i.OBJECT],imageTransformVariantsIncludeDefault:[!0,i.BOOLEAN],imageTransformVariantsDefaultName:[null,i.STRING],imageTransformVariantsIncludeOriginal:[!1,i.BOOLEAN],imageTransformVariantsOriginalName:["original_",i.STRING],imageTransformBeforeCreateBlob:[null,i.FUNCTION],imageTransformAfterCreateBlob:[null,i.FUNCTION],imageTransformCanvasMemoryLimit:[Y&&J?16777216:null,i.INT],imageTransformCanvasBackgroundColor:[null,i.STRING]}}};return Y&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Q})),Q});


/*!
 * FilePondPluginPdfConvert 1.0.0
 * Licensed under ISC, https://opensource.org/licenses/ISC/
 * Please visit undefined for details.
 */
/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginPdfConvert=t()}(this,(function(){"use strict";const e=(e,t,n)=>{const i=[],o=[];let a=0,d=0,r=1;return new Promise(((s,c)=>{if("undefined"==typeof pdfjsLib){const e="The library PDF.js is required to convert PDF in image";return console.warn(e),void c(e)}try{const c=new FileReader;c.onload=async function(){const c=new Uint8Array(this.result),u=await pdfjsLib.getDocument(c).promise;!async function c(){const f=await u.getPage(r),h=f.getViewport({scale:1.5}),l=document.createElement("canvas"),p=l.getContext("2d"),g={canvasContext:p,viewport:h};l.height=h.height,l.width=h.width,await f.render(g).promise,i.push(p.getImageData(0,0,l.width,l.height)),o.push(d),d+=l.height,a<l.width&&(a=l.width);if(r<u.numPages)r++,d+=n,c();else{const n=function(){const e=document.createElement("canvas"),t=e.getContext("2d");e.width=a,e.height=d;for(let e=0;e<i.length;e++)t.putImageData(i[e],0,o[e]);return e}(),r=atob(n.toDataURL(t).split(",")[1]),c=[];for(let e=0;e<r.length;e++)c.push(r.charCodeAt(e));const u=new Blob([new Uint8Array(c)],{type:t});s(new File([u],e.name,{type:t}))}}()},c.readAsArrayBuffer(e)}catch(e){c(e)}}))},t=({addFilter:t,utils:n})=>{const{Type:i}=n;return t("LOAD_FILE",((t,{query:n})=>new Promise(((i,o)=>{(e=>/pdf$/.test(e.type))(t)?e(t,n("GET_PDF_CONVERT_TYPE"),n("GET_PDF_CONVERT_MARGIN_HEIGHT")).then((function(e){i(e)})).catch((()=>i(t))):i(t)})))),{options:{pdfConvertType:["image/png",i.STRING],pdfConvertMarginHeight:[30,i.NUMBER]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t})),t}));


/*!
 * FilePondPluginImageOverlay 1.0.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginImageOverlay=t()}(this,(function(){"use strict";const e=e=>/^image/.test(e.type),t=e=>{let t=document.createElement("span");return t.className="filepond--magnify-icon",t.title=e,t},n=e=>{const t=document.createElement("div");t.className="filepond--fullsize-overlay";const n=document.createElement("div"),o=URL.createObjectURL(e.file);n.className="image-container",n.style.backgroundImage="url("+o+")",i(o,n);let d=document.getElementsByTagName("body")[0];t.appendChild(n),d.appendChild(t),t.addEventListener("click",()=>t.remove())},i=(e,t)=>{const n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);((e,t)=>{let n=new Image;n.onload=()=>{const e=n.naturalWidth,i=n.naturalHeight;n=null,t(e,i)},n.src=e})(e,(e,o)=>{(e>n||o>i)&&(t.style.backgroundSize="contain")})},o=i=>{const{addFilter:o,utils:d}=i,{Type:l,createRoute:a}=d;return o("CREATE_VIEW",i=>{const{is:o,view:d,query:l}=i;if(!o("file"))return;d.registerWriter(a({DID_LOAD_ITEM:({root:i,props:o})=>{const{id:d}=o,a=l("GET_ITEM",d);if(!a||a.archived||!e(a.file))return;const c=i.query("GET_LABEL_BUTTON_IMAGE_OVERLAY");((e,i,o)=>{const d=i.querySelector(".filepond--file-info-main"),l=t(o);d.prepend(l),l.addEventListener("click",()=>n(e)),window.setTimeout(()=>{const t=i.querySelector(".filepond--image-preview");t&&(t.classList.add("clickable"),t.addEventListener("click",()=>n(e)))},1e3)})(a,i.element,c),i.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:d})}},({root:t,props:n})=>{const{id:i}=n,o=l("GET_ITEM",i);e(o.file)&&t.rect.element.hidden}))}),{options:{labelButtonImageOverlay:["Open image in overlay",l.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:o})),o}));


/*!
 * FilePondPluginGetFile 1.0.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginGetFile=t()}(this,(function(){"use strict";const e=e=>{let t=document.createElement("span");return t.className="filepond--download-icon",t.title=e,t},t=(e,t)=>{if(t&&e.getMetadata("url"))location.href=e.getMetadata("url");else{const t=document.createElement("a"),n=window.URL.createObjectURL(e.file);document.body.appendChild(t),t.style.display="none",t.href=n,t.download=e.file.name,t.click(),window.URL.revokeObjectURL(n),t.remove()}},n=n=>{const{addFilter:o,utils:i}=n,{Type:d,createRoute:l}=i;return o("CREATE_VIEW",n=>{const{is:o,view:i,query:d}=n;if(!o("file"))return;i.registerWriter(l({DID_LOAD_ITEM:({root:n,props:o})=>{const{id:i}=o,l=d("GET_ITEM",i);if(!l||l.archived)return;const r=n.query("GET_LABEL_BUTTON_DOWNLOAD_ITEM"),a=n.query("GET_ALLOW_DOWNLOAD_BY_URL");((n,o,i,d)=>{const l=o.querySelector(".filepond--file-info-main"),r=e(i);l.prepend(r),r.addEventListener("click",()=>t(n,d))})(l,n.element,r,a)}},({root:e,props:t})=>{const{id:n}=t;d("GET_ITEM",n);e.rect.element.hidden}))}),{options:{labelButtonDownloadItem:["Download file",d.STRING],allowDownloadByUrl:[!1,d.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n}));